!function(){const t=document.createElement("link").relList;if(!(t&&t.supports&&t.supports("modulepreload"))){for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver(t=>{for(const s of t)if("childList"===s.type)for(const t of s.addedNodes)"LINK"===t.tagName&&"modulepreload"===t.rel&&e(t)}).observe(document,{childList:!0,subtree:!0})}function e(t){if(t.ep)return;t.ep=!0;const e=function(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),"use-credentials"===t.crossOrigin?e.credentials="include":"anonymous"===t.crossOrigin?e.credentials="omit":e.credentials="same-origin",e}(t);fetch(t.href,e)}}();var t=(t=>(t[t.UNSTARTED=-1]="UNSTARTED",t[t.ENDED=0]="ENDED",t[t.PLAYING=1]="PLAYING",t[t.PAUSED=2]="PAUSED",t[t.BUFFERING=3]="BUFFERING",t[t.CUED=5]="CUED",t))(t||{}),e=(t=>(t.NONE="none",t.ONE="one",t.ALL="all",t))(e||{}),s=(t=>(t.INVALID_VIDEO_ID="INVALID_VIDEO_ID",t.VIDEO_NOT_FOUND="VIDEO_NOT_FOUND",t.VIDEO_NOT_EMBEDDABLE="VIDEO_NOT_EMBEDDABLE",t.NETWORK_ERROR="NETWORK_ERROR",t.API_ERROR="API_ERROR",t.STORAGE_ERROR="STORAGE_ERROR",t))(s||{});function a(t,e="medium"){return`https://img.youtube.com/vi/${t}/${{default:"default",medium:"mqdefault",high:"hqdefault",standard:"sddefault",maxres:"maxresdefault"}[e]}.jpg`}const i=new class{constructor(){this.state={loaded:!1,loading:!1},this.loadPromise=null,this.callbacks=[]}async loadAPI(){return this.state.loaded?Promise.resolve():(this.state.loading&&this.loadPromise||(this.state.loading=!0,this.loadPromise=new Promise((t,e)=>{if(window.YT&&window.YT.Player)return this.state.loaded=!0,this.state.loading=!1,void t();const s=window.onYouTubeIframeAPIReady;window.onYouTubeIframeAPIReady=()=>{this.state.loaded=!0,this.state.loading=!1,this.callbacks.forEach(t=>t()),this.callbacks=[],s&&s(),t()};const a=document.createElement("script");a.src="https://www.youtube.com/iframe_api",a.onerror=()=>{this.state.loading=!1,this.state.error="Failed to load YouTube API",e(new Error("Failed to load YouTube API"))};const i=document.getElementsByTagName("script")[0];i&&i.parentNode?i.parentNode.insertBefore(a,i):document.head.appendChild(a),setTimeout(()=>{this.state.loading&&(this.state.loading=!1,this.state.error="YouTube API load timeout",e(new Error("YouTube API load timeout")))},1e4)})),this.loadPromise)}isReady(){return this.state.loaded&&!(!window.YT||!window.YT.Player)}async waitForReady(){return this.isReady()?Promise.resolve():(this.state.loading||this.state.loaded||await this.loadAPI(),new Promise(t=>{this.isReady()?t():this.callbacks.push(t)}))}getState(){return{...this.state}}};function n(t,e){let s;return(...a)=>{clearTimeout(s),s=window.setTimeout(()=>t(...a),e)}}class r{constructor(t="ytMusicPlayer"){this.prefix=t}save(t,e){try{const s=JSON.stringify(e),a=this.getFullKey(t);localStorage.setItem(a,s)}catch(s){throw console.warn("Failed to save to localStorage:",s),new Error(`Storage save failed: ${s}`)}}load(t){try{const e=this.getFullKey(t),s=localStorage.getItem(e);return null===s?null:JSON.parse(s)}catch(e){return console.warn("Failed to load from localStorage:",e),null}}remove(t){try{const e=this.getFullKey(t);localStorage.removeItem(e)}catch(e){console.warn("Failed to remove from localStorage:",e)}}clear(){try{const t=[];for(let e=0;e<localStorage.length;e++){const s=localStorage.key(e);s&&s.startsWith(this.prefix+":")&&t.push(s)}t.forEach(t=>localStorage.removeItem(t))}catch(t){console.warn("Failed to clear localStorage:",t)}}isAvailable(){try{const t="__localStorage_test__";return localStorage.setItem(t,"test"),localStorage.removeItem(t),!0}catch{return!1}}getUsageInfo(){if(!this.isAvailable())return{used:0,available:0,percentage:0};try{let t=0;for(let a=0;a<localStorage.length;a++){const e=localStorage.key(a);if(e){const s=localStorage.getItem(e);t+=e.length+((null==s?void 0:s.length)||0)}}const e=5242880,s=t/e*100;return{used:t,available:e-t,percentage:Math.min(s,100)}}catch{return{used:0,available:0,percentage:0}}}getFullKey(t){return`${this.prefix}:${t}`}}class l{constructor(t,e="ytMusicPlayer"){this.stateKey="playerState",this.storage=t||new r(e)}saveState(t){try{const e={...t,lastUpdated:t.lastUpdated.toISOString(),playlist:{...t.playlist,tracks:t.playlist.tracks.map(t=>({...t,addedAt:t.addedAt.toISOString()}))}};this.storage.save(this.stateKey,e)}catch(e){console.warn("Failed to save player state:",e)}}loadState(){try{const t=this.storage.load(this.stateKey);return t?{...t,lastUpdated:new Date(t.lastUpdated),playlist:{...t.playlist,tracks:t.playlist.tracks.map(t=>({...t,addedAt:new Date(t.addedAt)}))}}:null}catch(t){return console.warn("Failed to load player state:",t),null}}savePlaylist(t){try{const e=this.loadState();e&&(e.playlist=t,e.lastUpdated=new Date,this.saveState(e))}catch(e){console.warn("Failed to save playlist:",e)}}saveCurrentTime(t){try{const e=this.loadState();e&&(e.currentTime=t,e.lastUpdated=new Date,this.saveState(e))}catch(e){console.warn("Failed to save current time:",e)}}saveSettings(t){try{const e=this.loadState();e&&(e.settings=t,e.lastUpdated=new Date,this.saveState(e))}catch(e){console.warn("Failed to save settings:",e)}}clearState(){try{this.storage.remove(this.stateKey)}catch(t){console.warn("Failed to clear player state:",t)}}isStorageAvailable(){return!(this.storage instanceof r)||this.storage.isAvailable()}migrateData(t="ytMusicPlayer"){try{const e=localStorage.getItem(t);if(!e)return!1;const s=JSON.parse(e);return!(!s||"object"!=typeof s)&&(this.storage.save(this.stateKey,s),localStorage.removeItem(t),!0)}catch(e){return console.warn("Failed to migrate data:",e),!1}}}const o=new l;class d{constructor(t){this.player=null,this.playlist={tracks:[],currentIndex:0,shuffled:!1},this.settings={volume:80,repeatMode:e.ALL,shuffled:!1,autoplay:!1},this.currentTime=0,this.isReady=!1,this.eventListeners=new Map,this.containerId=t.containerId,this.storage=!1!==t.saveState?o:new l,void 0!==t.volume&&(this.settings.volume=t.volume),void 0!==t.repeat&&(this.settings.repeatMode=t.repeat),void 0!==t.shuffle&&(this.settings.shuffled=t.shuffle),void 0!==t.autoplay&&(this.settings.autoplay=t.autoplay),this.debouncedSaveState=n(()=>this.saveCurrentState(),1e3),this.debouncedTimeUpdate=n(()=>this.debouncedSaveState(),2e3),this.initialize()}async initialize(){try{this.loadStoredState(),await i.waitForReady(),this.ensureContainer(),this.createPlayer(),this.emit("ready",{player:this})}catch(t){this.handleError({type:s.API_ERROR,message:"Failed to initialize player",originalError:t})}}ensureContainer(){let t=document.getElementById(this.containerId);t||(t=document.createElement("div"),t.id=this.containerId,t.style.cssText="width: 0; height: 0; overflow: hidden; position: absolute;",document.body.appendChild(t))}createPlayer(){const t={height:0,width:0,playerVars:{autoplay:0,controls:0,disablekb:1,enablejsapi:1,iv_load_policy:3,modestbranding:1,playsinline:1,rel:0,origin:window.location.origin},events:{onReady:t=>this.handlePlayerReady(t),onStateChange:t=>this.handlePlayerStateChange(t),onError:t=>this.handlePlayerError(t)}};this.player=new window.YT.Player(this.containerId,t)}handlePlayerReady(t){var e;this.isReady=!0,null==(e=this.player)||e.setVolume(this.settings.volume),this.startTimeMonitoring(),this.playlist.tracks.length>0&&this.loadCurrentTrack(),this.emit("ready",{player:this})}handlePlayerStateChange(e){const s=e.data;this.emit("stateChange",{state:s,isPlaying:s===t.PLAYING,isPaused:s===t.PAUSED,isEnded:s===t.ENDED}),s===t.ENDED&&this.handleTrackEnded(),s===t.PLAYING&&this.debouncedSaveState()}handlePlayerError(t){const e=t.data,a=this.getCurrentTrack(),i=function(t,e){const a={2:{type:s.INVALID_VIDEO_ID,message:"The video ID is invalid or contains invalid characters."},5:{type:s.API_ERROR,message:"The requested content cannot be played in an HTML5 player."},100:{type:s.VIDEO_NOT_FOUND,message:"The video was not found or has been removed."},101:{type:s.VIDEO_NOT_EMBEDDABLE,message:"The video owner does not allow it to be played in embedded players."},150:{type:s.VIDEO_NOT_EMBEDDABLE,message:"The video owner does not allow it to be played in embedded players."}}[t]||{type:s.API_ERROR,message:`Unknown YouTube API error: ${t}`};return{type:a.type,message:a.message,...e&&{videoId:e},originalError:t}}(e,null==a?void 0:a.id);this.handleError(i),[100,101,150].includes(e)&&this.playlist.tracks.length>1&&this.next()}handleTrackEnded(){this.settings.repeatMode===e.ONE?(this.seekTo(0),this.play()):this.next()}startTimeMonitoring(){const t=()=>{this.player&&this.isReady&&(this.currentTime=this.player.getCurrentTime(),this.handleTimeUpdate()),requestAnimationFrame(t)};t()}handleTimeUpdate(){this.emit("timeUpdate",{currentTime:this.currentTime,duration:this.getDuration(),progress:this.getProgress()}),this.debouncedTimeUpdate()}async addTrack(t,e){const i=function(t){const e=[/(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/)([a-zA-Z0-9_-]{11})/,/(?:m\.youtube\.com\/watch\?v=)([a-zA-Z0-9_-]{11})/,/(?:youtu\.be\/)([a-zA-Z0-9_-]{11})/,/^([a-zA-Z0-9_-]{11})$/],s=t.trim();for(const a of e){const t=s.match(a);if(t&&t[1])return{isValid:!0,videoId:t[1]}}return{isValid:!1,error:"Invalid YouTube URL or Video ID"}}(t);if(!i.isValid||!i.videoId)return this.handleError({type:s.INVALID_VIDEO_ID,message:"Invalid YouTube URL"}),null;const n={id:i.videoId,title:e||`Video ${i.videoId}`,duration:0,thumbnail:a(i.videoId),url:t,addedAt:new Date};return this.playlist.tracks.push(n),1===this.playlist.tracks.length&&(this.playlist.currentIndex=0,this.loadCurrentTrack()),this.emit("playlistChange",{playlist:this.playlist,action:"add",track:n}),this.debouncedSaveState(),n}async addTrackWithMetadata(t){const e={id:t.id,title:t.title,artist:t.artist,tags:t.tags,duration:0,thumbnail:a(t.id),url:`https://youtu.be/${t.id}`,addedAt:new Date};return this.playlist.tracks.push(e),1===this.playlist.tracks.length&&(this.playlist.currentIndex=0,this.loadCurrentTrack()),this.emit("playlistChange",{playlist:this.playlist,action:"add",track:e}),this.debouncedSaveState(),e}removeTrack(t){if(t<0||t>=this.playlist.tracks.length)return!1;const e=this.playlist.tracks[t];return this.playlist.tracks.splice(t,1),t<this.playlist.currentIndex?this.playlist.currentIndex--:t===this.playlist.currentIndex&&(0===this.playlist.tracks.length?(this.playlist.currentIndex=0,this.stop()):(this.playlist.currentIndex>=this.playlist.tracks.length&&(this.playlist.currentIndex=0),this.loadCurrentTrack())),this.emit("playlistChange",{playlist:this.playlist,action:"remove",track:e,index:t}),this.debouncedSaveState(),!0}loadCurrentTrack(){const t=this.getCurrentTrack();t&&this.player&&this.isReady&&(this.player.loadVideoById(t.id,this.currentTime),this.emit("trackChange",{track:t,index:this.playlist.currentIndex,playlist:this.playlist}))}play(){this.player&&this.isReady&&this.player.playVideo()}pause(){this.player&&this.isReady&&this.player.pauseVideo()}stop(){this.player&&this.isReady&&(this.player.stopVideo(),this.currentTime=0)}togglePlay(){if(!this.player||!this.isReady)return;this.player.getPlayerState()===t.PLAYING?this.pause():this.play()}next(){if(0===this.playlist.tracks.length)return;let t;if(this.settings.shuffled&&this.playlist.shuffleOrder){const e=(this.playlist.shuffleOrder.indexOf(this.playlist.currentIndex)+1)%this.playlist.shuffleOrder.length;t=this.playlist.shuffleOrder[e]}else t=(this.playlist.currentIndex+1)%this.playlist.tracks.length;this.jumpToTrack(t)}previous(){if(0===this.playlist.tracks.length)return;let t;if(this.settings.shuffled&&this.playlist.shuffleOrder){const e=this.playlist.shuffleOrder.indexOf(this.playlist.currentIndex),s=0===e?this.playlist.shuffleOrder.length-1:e-1;t=this.playlist.shuffleOrder[s]}else t=0===this.playlist.currentIndex?this.playlist.tracks.length-1:this.playlist.currentIndex-1;this.jumpToTrack(t)}jumpToTrack(t){t<0||t>=this.playlist.tracks.length||(this.playlist.currentIndex=t,this.currentTime=0,this.loadCurrentTrack(),this.settings.autoplay&&this.play())}seekTo(t){this.player&&this.isReady&&(this.player.seekTo(t),this.currentTime=t)}setVolume(t){t=Math.max(0,Math.min(100,t)),this.settings.volume=t,this.player&&this.isReady&&this.player.setVolume(t),this.emit("volumeChange",{volume:t}),this.debouncedSaveState()}toggleMute(){this.player&&this.isReady&&(this.player.isMuted()?this.player.unMute():this.player.mute())}toggleShuffle(){this.settings.shuffled=!this.settings.shuffled,this.settings.shuffled?this.playlist.shuffleOrder=function(t,e){const s=Array.from({length:t},(t,e)=>e);for(let a=s.length-1;a>0;a--){const t=Math.floor(Math.random()*(a+1));[s[a],s[t]]=[s[t],s[a]]}if(void 0!==e&&e>=0&&e<t){const t=s.indexOf(e);t>0&&([s[0],s[t]]=[s[t],s[0]])}return s}(this.playlist.tracks.length,this.playlist.currentIndex):this.playlist.shuffleOrder=void 0,this.emit("settingsChange",{settings:this.settings}),this.debouncedSaveState()}toggleRepeat(){const t=[e.NONE,e.ALL,e.ONE],s=(t.indexOf(this.settings.repeatMode)+1)%t.length;this.settings.repeatMode=t[s],this.emit("settingsChange",{settings:this.settings}),this.debouncedSaveState()}clearPlaylist(){this.playlist.tracks=[],this.playlist.currentIndex=0,this.playlist.shuffleOrder=void 0,this.stop(),this.emit("playlistChange",{playlist:this.playlist,action:"clear"}),this.debouncedSaveState()}getCurrentTrack(){return this.playlist.tracks[this.playlist.currentIndex]||null}getPlaylist(){return{...this.playlist}}getSettings(){return{...this.settings}}getCurrentTime(){return this.currentTime}getDuration(){var t;return(null==(t=this.player)?void 0:t.getDuration())||0}getProgress(){const t=this.getDuration();return t>0?this.currentTime/t*100:0}getVolume(){return this.settings.volume}isPlaying(){var e;return(null==(e=this.player)?void 0:e.getPlayerState())===t.PLAYING}isPaused(){var e;return(null==(e=this.player)?void 0:e.getPlayerState())===t.PAUSED}isMuted(){var t;return(null==(t=this.player)?void 0:t.isMuted())||!1}on(t,e){var s;this.eventListeners.has(t)||this.eventListeners.set(t,[]),null==(s=this.eventListeners.get(t))||s.push(e)}off(t,e){const s=this.eventListeners.get(t);if(s){const t=s.indexOf(e);t>-1&&s.splice(t,1)}}emit(t,e){const s=this.eventListeners.get(t);s&&s.forEach(t=>{try{t(e)}catch(s){console.warn("Event handler error:",s)}})}handleError(t){console.error("Player error:",t),this.emit("error",t)}saveCurrentState(){if(!this.storage)return;const t={playlist:this.playlist,currentTime:this.currentTime,settings:this.settings,lastUpdated:new Date};this.storage.saveState(t)}hasInitializedPlaylist(){return this.playlist.tracks.length>0}loadStoredState(){if(!this.storage)return;const t=this.storage.loadState();t&&(this.playlist=t.playlist,this.currentTime=t.currentTime,this.settings=t.settings)}destroy(){this.player&&(this.player.destroy(),this.player=null),this.eventListeners.clear(),this.isReady=!1}}let c,h=!1;const u=[{id:"remote",name:"🎵 Finest Music",file:"playlist-remote.json",default:!0},{id:"bangers",name:"🔥 Bangers",file:"playlist-bangers.json"},{id:"mash",name:"🎵 Mash",file:"playlist-mash.json"}];let y=(u.find(t=>t.default)||u[0]).id;async function g(t=null){var e;try{const s=t||(null==(e=u.find(t=>t.id===y))?void 0:e.file)||"playlist-bangers.json",a=await fetch(`./${s}`);return await a.json()}catch(s){return console.error("Failed to load tracklist:",s),[]}}async function p(){try{const t=function(t){const e=JSON.stringify(t.map(t=>({id:t.id,title:t.title,artist:t.artist})));let s=0;for(let a=0;a<e.length;a++)s=(s<<5)-s+e.charCodeAt(a),s&=s;return s.toString()}(await g()),e=`ytMusicPlayer:tracklistHash:${y}`,s=localStorage.getItem(e);return s&&s!==t?(console.log("Tracklist changed, clearing stored data..."),localStorage.removeItem("ytMusicPlayer:playerState"),localStorage.setItem(e,t),!0):(s||localStorage.setItem(e,t),!1)}catch(t){return console.error("Failed to check tracklist changes:",t),!1}}function m(){const t=document.getElementById("playlistSelector");t&&(t.value=y)}async function f(){try{const e=await g();let s=0;for(const a of e)try{await c.addTrackWithMetadata(a)&&s++}catch(t){console.warn("Failed to add track:",a,t)}v(`✅ Loaded ${s} tracks from tracklist!`)}catch(t){v("❌ Failed to load initial tracks"),console.error("Failed to load initial tracks:",t)}}function v(t){console.log(t)}function w(t){const e=document.getElementById("albumArt"),s=document.getElementById("albumArtPlaceholder"),a=document.getElementById("albumArtOverlay");t?(e.classList.remove("hidden"),s.classList.add("hidden"),a.classList.remove("hidden")):(e.classList.add("hidden"),s.classList.remove("hidden"),a.classList.add("hidden"))}function I(t){if(!t)return void w(!1);T(document.getElementById("albumArt"),[`https://img.youtube.com/vi/${t}/maxresdefault.jpg`,`https://img.youtube.com/vi/${t}/hqdefault.jpg`,`https://img.youtube.com/vi/${t}/mqdefault.jpg`],0)}function T(t,e,s){if(s>=e.length)return void w(!1);const a=new Image;a.onload=function(){t.src=e[s]},a.onerror=function(){T(t,e,s+1)},a.src=e[s]}function E(t){const e=document.getElementById("trackTitle"),s=document.getElementById("trackInfo");t?(t.artist?e.textContent=`${t.artist} - ${t.title}`:e.textContent=t.title,t.tags&&t.tags.length>0?s.textContent=t.tags.join(", "):s.textContent=`Video ID: ${t.id}`,I(t.id)):(e.textContent="No track loaded",s.textContent="Select a track to start playing",w(!1))}function S(){const t=document.getElementById("trackList"),e=document.getElementById("trackCount"),s=c.getPlaylist();e.textContent=s.tracks.length,0!==s.tracks.length?t.innerHTML=s.tracks.map((t,e)=>{const a=e===s.currentIndex;let i="";t.artist?i=t.artist:t.tags&&t.tags.length>0&&(i=t.tags.slice(0,2).join(", "));const n=t.duration>0?P(t.duration):"";return`\n                    <div class="playlist-item p-4 cursor-pointer ${a?"active":""}" onclick="jumpToTrack(${e})">\n                        <div class="flex items-center gap-3">\n                            <div class="w-8 h-8 flex items-center justify-center">\n                                ${a?'\n                                    <div class="w-4 h-4 bg-red-500 rounded-full flex items-center justify-center">\n                                        <div class="w-2 h-2 bg-white rounded-full animate-pulse-dot"></div>\n                                    </div>\n                                ':'\n                                    <svg class="w-4 h-4 text-gray-400" fill="currentColor" viewBox="0 0 24 24">\n                                        <path d="M8 5v14l11-7z"/>\n                                    </svg>\n                                '}\n                            </div>\n                            <div class="flex-1 min-w-0">\n                                <h4 class="track-title font-medium text-sm truncate ${a?"text-red-600":"text-gray-900"}">${t.title}</h4>\n                                <p class="text-xs text-gray-500 truncate">${i}</p>\n                            </div>\n                            ${n?`<span class="text-xs text-gray-400">${n}</span>`:""}\n                        </div>\n                    </div>\n                `}).join(""):t.innerHTML='\n                    <div class="flex items-center justify-center p-8 text-gray-500">\n                        <div class="text-center">\n                            <svg class="w-12 h-12 mx-auto mb-2 text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"/>\n                            </svg>\n                            <p class="text-sm">Loading tracks...</p>\n                        </div>\n                    </div>\n                '}function k(){const t=c.getSettings(),s=document.getElementById("shuffleBtn"),a=document.getElementById("repeatBtn");t.shuffled?(s.classList.add("text-red-500"),s.classList.remove("text-gray-600")):(s.classList.add("text-gray-600"),s.classList.remove("text-red-500")),t.repeatMode!==e.NONE?(a.classList.add("text-red-500"),a.classList.remove("text-gray-600")):(a.classList.add("text-gray-600"),a.classList.remove("text-red-500"))}function b(){S(),k(),E(c.getCurrentTrack()),m()}function P(t){if(isNaN(t)||t<0)return"0:00";return`${Math.floor(t/60)}:${Math.floor(t%60).toString().padStart(2,"0")}`}window.togglePlay=function(){c.togglePlay()},window.switchPlaylist=async function(t){var e;if(t!==y)try{v("🔄 Switching playlist..."),y=t,c.clearPlaylist(),await f(),b(),m();v(`✅ Switched to ${(null==(e=u.find(e=>e.id===t))?void 0:e.name)||"Unknown"}!`)}catch(s){v("❌ Failed to switch playlist"),console.error("Failed to switch playlist:",s)}},window.next=function(){c.next()},window.previous=function(){c.previous()},window.seek=function(t){const e=t.currentTarget.getBoundingClientRect(),s=(t.clientX-e.left)/e.width*c.getDuration();c.seekTo(s)},window.toggleShuffle=function(){c.toggleShuffle()},window.toggleRepeat=function(){c.toggleRepeat()},window.jumpToTrack=function(t){c.jumpToTrack(t)},window.togglePlaylist=function(){const t=document.getElementById("playlistPanel");h=!h,h?t.classList.remove("hidden"):t.classList.add("hidden")},window.toggleLike=function(){const t=c.getCurrentTrack();if(t){const e=`https://www.youtube.com/watch?v=${t.id}`;window.open(e,"_blank")}},window.copyTrackInfo=function(){const t=c.getCurrentTrack();if(t){const e=`https://www.youtube.com/watch?v=${t.id}`;navigator.clipboard.writeText(e).then(()=>{console.log("📋 YouTube URL copied to clipboard!")}).catch(t=>{console.error("Failed to copy to clipboard:",t)})}};let x="true"===localStorage.getItem("ytMusicPlayer:videoMode");window.toggleVideoMode=function(){x=!x;const t=document.body,e=document.getElementById("videoOffIcon"),s=document.getElementById("videoOnIcon");x?(t.classList.add("video-mode"),e.classList.add("hidden"),s.classList.remove("hidden"),console.log("🎬 Video mode enabled")):(t.classList.remove("video-mode"),e.classList.remove("hidden"),s.classList.add("hidden"),console.log("🖼️ Album art mode enabled")),localStorage.setItem("ytMusicPlayer:videoMode",x.toString())},window.showAlbumArt=w,window.handleAlbumArtLoad=function(t){console.log(`Album art loaded: ${t.naturalWidth}x${t.naturalHeight}`),w(!0)},async function(){try{await p()&&v("📋 Tracklist updated, loading new tracks..."),c=new d({containerId:"youtube-player",autoplay:!1,volume:100,saveState:!0}),c.on("ready",async()=>{v("🎉 Player ready!"),c.hasInitializedPlaylist()?v("🎉 Player ready! Playlist loaded from storage."):(v("🎉 Player ready! Loading tracks..."),await f()),b()}),c.on("trackChange",t=>{E(t.track),S()}),c.on("stateChange",t=>{!function(t){const e=document.getElementById("playIcon"),s=document.getElementById("pauseIcon");t?(e.classList.add("hidden"),s.classList.remove("hidden")):(e.classList.remove("hidden"),s.classList.add("hidden"))}(t.isPlaying),function(t,e){const s=document.getElementById("statusIndicator");s.className=t?"w-3 h-3 bg-green-400 rounded-full animate-pulse-dot":e?"w-3 h-3 bg-yellow-400 rounded-full":"w-3 h-3 bg-gray-400 rounded-full"}(t.isPlaying,t.isPaused),t.isPlaying?v("▶ Playing..."):t.isPaused&&v("⏸ Paused")}),c.on("timeUpdate",t=>{!function(t,e){const s=document.getElementById("progressFill"),a=document.getElementById("currentTime"),i=document.getElementById("duration"),n=e>0?t/e*100:0;s.style.width=n+"%",a.textContent=P(t),i.textContent=P(e)}(t.currentTime,t.duration)}),c.on("playlistChange",()=>{S()}),c.on("settingsChange",()=>{k()}),c.on("error",t=>{v(`❌ Error: ${t.message}`),console.error("Player error:",t)})}catch(t){v(`❌ Failed to initialize player: ${t.message}`),console.error("Initialization error:",t)}}(),x&&toggleVideoMode();
//# sourceMappingURL=main-BlDLlQPB.js.map
